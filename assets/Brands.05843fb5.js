import{C as ee,F as te}from"./Field.e1e626a4.js";import{M as ae,C as ne}from"./CardComponent.090bf16a.js";import{g as oe,r as j,_ as le,u as re,s as $,h as S,c as w,i as se,a as _,b as r,d as n,j as d,e as B,k as t,F as g,l as de,o as p,J as k,p as z,t as y,y as E,z as ce,n as ue,A as ie,B as me,C as fe}from"./index.25c2e62e.js";import{M as U}from"./velocity.min.bd433040.js";import{b as pe,a as be,c as _e,d as Be}from"./brand.961e0e18.js";const ge=oe("brand",()=>{const M=j([]);return{brands:M,createBrand:async s=>{try{return await pe(s)}catch(o){throw o}},getBrands:async()=>{try{const s=await be(),o=Object.keys(s).map(i=>({...s[i],id:i}));M.value=o}catch(s){throw s}},updateBrand:async({id:s,data:o})=>{try{return await _e(s,o)}catch(i){throw i}},deleteBrand:async s=>{try{return await Be(s)}catch(o){throw o}}}}),ye={class:"border-t border-b border-gray-100 bg-white p-6 dark:border-gray-900 dark:bg-gray-900/70 dark:text-white"},ve=r("h1",{class:"text-3xl font-semibold leading-tight"},"Brands",-1),he=r("thead",null,[r("tr",null,[r("th",null,"\u54C1\u724C\u540D\u7A31"),r("th",null,"\u54C1\u724C\u5168\u540D"),r("th")])],-1),Ce={"data-label":"\u54C1\u724C\u540D\u7A31"},Ve={"data-label":"\u54C1\u724C\u5168\u540D"},we={class:"actions-cell"},ke={class:"border-t border-gray-100 p-3 dark:border-gray-800 lg:px-6"},Me=E(" \u78BA\u5B9A\u8981\u522A\u9664"),xe=E("\uFF1F "),Pe={setup(M){const N=re(),u=ge(),{darkMode:D,notificationState:x}=$(N),{brands:s}=$(u),o=S({id:"",data:{}}),i=(l,a)=>{x.value={type:l,message:a},setTimeout(()=>{x.value={}},2e3)},b=()=>{o.id="",o.data={}},H=l=>{m.value=l,Velocity(document.documentElement,"scroll",{offset:0,mobileHA:!1})},P=j(10),m=j(0),F=w(()=>s.value.slice(P.value*m.value,P.value*(m.value+1))),T=w(()=>Math.ceil(s.value.length/P.value)),G=w(()=>m.value+1),O=w(()=>{const l=[];for(let a=0;a<T.value;a++)l.push(a);return l}),c=S({create:!1,info:!1,delete:!1}),A=async({id:l,...a},v)=>{try{c[v]=!0,o.id=l,o.data=a}catch(h){console.error(h)}},f=S({brand:"",fullBrand:""}),R=()=>{c.create=!0},q=async()=>{try{await u.createBrand(f),await u.getBrands(),i("success","\u65B0\u589E\u54C1\u724C\u6210\u529F"),b(),J()}catch(l){console.error(l)}},I=()=>{b(),J()},J=()=>{f.brand="",f.fullBrand=""},K=async()=>{try{await u.getBrands()}catch(l){console.log(l)}},Q=async()=>{try{await u.updateBrand(o),await u.getBrands(),i("success","\u4FEE\u6539\u54C1\u724C\u6210\u529F"),b()}catch(l){console.error(l)}},W=async()=>{try{await u.deleteBrand(o.id),await u.getBrands(),F.value.length===0&&m.value>0&&(m.value=m.value-1),i("success","\u522A\u9664\u54C1\u724C\u6210\u529F"),b()}catch(l){console.error(l)}};return se(()=>{s.value.length||K()}),(l,a)=>{const v=de,h=ce,X=ne,Y=ae,C=ee,V=te;return p(),_(g,null,[r("section",ye,[n(v,null,{default:d(()=>[ve,n(k,{color:"white",label:"\u65B0\u589E\u54C1\u724C",onClick:R})]),_:1})]),n(Y,null,{default:d(()=>[n(X,{class:"mb-6","has-table":""},{default:d(()=>[r("table",null,[he,r("tbody",null,[(p(!0),_(g,null,z(t(F),(e,L)=>(p(),_("tr",{key:e.id,class:ue(["lg:hover:bg-gray-100",L%2===0?"lg:bg-gray-50":""])},[r("td",Ce,y(e.brand),1),r("td",Ve,y(e.fullBrand),1),r("td",we,[n(h,{type:"justify-start lg:justify-end","no-wrap":""},{default:d(()=>[n(k,{color:"info",icon:t(ie),small:"",onClick:Z=>A(e,"info")},null,8,["icon","onClick"]),n(k,{color:"danger",icon:t(me),small:"",onClick:Z=>A(e,"delete")},null,8,["icon","onClick"])]),_:2},1024)])],2))),128))])]),B(" pagination "),r("div",ke,[n(v,null,{default:d(()=>[n(h,null,{default:d(()=>[(p(!0),_(g,null,z(t(O),e=>(p(),fe(k,{key:e,active:e===m.value,label:e+1,outline:t(D),small:"",onClick:L=>H(e)},null,8,["active","label","outline","onClick"]))),128))]),_:1}),r("small",null,"Page "+y(t(G))+" of "+y(t(T)),1)]),_:1})])]),_:1})]),_:1}),B(" \u65B0\u589E\u54C1\u724C "),n(U,{modelValue:t(c).create,"onUpdate:modelValue":a[2]||(a[2]=e=>t(c).create=e),title:"\u65B0\u589E\u54C1\u724C",onConfirm:q,onCancel:I},{default:d(()=>[t(c).create?(p(),_(g,{key:0},[n(V,{label:"\u54C1\u724C\u540D\u7A31",class:"mb-0"},{default:d(()=>[n(C,{modelValue:t(f).brand,"onUpdate:modelValue":a[0]||(a[0]=e=>t(f).brand=e),modelModifiers:{trim:!0},type:"text"},null,8,["modelValue"])]),_:1}),n(V,{label:"\u54C1\u724C\u5168\u540D"},{default:d(()=>[n(C,{modelValue:t(f).fullBrand,"onUpdate:modelValue":a[1]||(a[1]=e=>t(f).fullBrand=e),modelModifiers:{trim:!0},type:"text"},null,8,["modelValue"])]),_:1})],64)):B("v-if",!0)]),_:1},8,["modelValue"]),B(" \u4FEE\u6539\u54C1\u724C "),n(U,{modelValue:t(c).info,"onUpdate:modelValue":a[5]||(a[5]=e=>t(c).info=e),title:"\u4FEE\u6539\u54C1\u724C",onConfirm:Q,onCancel:b},{default:d(()=>[t(c).info?(p(),_(g,{key:0},[n(V,{label:"\u540D\u7A31",class:"mb-0"},{default:d(()=>[n(C,{modelValue:t(o).data.brand,"onUpdate:modelValue":a[3]||(a[3]=e=>t(o).data.brand=e),modelModifiers:{trim:!0},type:"text"},null,8,["modelValue"])]),_:1}),n(V,{label:"\u5168\u540D"},{default:d(()=>[n(C,{modelValue:t(o).data.fullBrand,"onUpdate:modelValue":a[4]||(a[4]=e=>t(o).data.fullBrand=e),modelModifiers:{trim:!0},type:"text"},null,8,["modelValue"])]),_:1})],64)):B("v-if",!0)]),_:1},8,["modelValue"]),B(" \u522A\u9664\u54C1\u724C "),n(U,{modelValue:t(c).delete,"onUpdate:modelValue":a[6]||(a[6]=e=>t(c).delete=e),"large-title":"Please confirm",button:"danger","has-cancel":"",onConfirm:W,onCancel:b},{default:d(()=>[r("p",null,[Me,r("strong",null,"\u300C"+y(t(o).data.fullBrand)+"\u300D",1),xe])]),_:1},8,["modelValue"])],64)}}},Fe=le(Pe,[["__file","/Users/kenge/Documents/code/side-project/watch-store-admin/src/views/Brands.vue"]]);export{Fe as default};
